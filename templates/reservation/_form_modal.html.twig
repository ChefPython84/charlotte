{# Partial chargé via AJAX dans le modal #}
{# MODIFIÉ : Reçoit 'dispo' au lieu de 'start'/'end' #}
<form id="reservation-form" action="{{ path('reservation_new', { id: salle.id }) }}" method="post" class="p-3">
    
    {# Champ caché crucial #}
    <input type="hidden" name="disponibiliteId" value="{{ dispo.id }}">

    <div class="alert alert-info">
        <h6 class="alert-heading">Créneau demandé</h6>
        Du <strong>{{ dispo.dateDebut|date('d/m/Y H:i') }}</strong><br>
        au <strong>{{ dispo.dateFin|date('d/m/Y H:i') }}</strong>
    </div>

    <div class="mb-3">
        <label class="form-label fw-semibold">
            Nom
        </label>
        <input type="text" name="nom" class="form-control form-control-lg rounded-pill" placeholder="Prénom Nom" required
               value="{{ app.user ? app.user.nom ~ ' ' ~ app.user.prenom : '' }}" disabled>
    </div>

    <div class="mb-3">
        <label class="form-label fw-semibold">
            Email
        </label>
        <input type="email" name="email" class="form-control rounded-pill" placeholder="exemple@email.com"
               value="{{ app.user ? app.user.email : '' }}" disabled>
    </div>
    
    <p class="text-muted small">
        Votre demande sera envoyée à l'administrateur pour validation.
    </p>

    <div class="d-flex justify-content-end gap-2 mt-3">
        <button type="button" class="btn btn-light rounded-pill px-4" data-bs-dismiss="modal">Annuler</button>
        <button type="submit" class="btn btn-gradient rounded-pill px-4" data-submit>Confirmer la demande</button>
    </div>
</form>